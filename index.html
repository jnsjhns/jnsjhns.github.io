<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Desktop Gallery</title>
<style>
body {
  background: #a7b7c9;
  font-family: 'Courier New', monospace;
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
}
.grid {
  display: grid;
  grid-template-areas:
    "menu box1"
    "menu box2";
  grid-template-columns: 170px 1fr;
  grid-template-rows: 2fr 1fr;
  gap: 30px 32px;
  width: 98vw;
  max-width: 900px;
  margin: 54px 0;
  align-items: start;
  justify-items: center;
}
.menu {
  grid-area: menu;
  display: grid;
  grid-template-rows: repeat(5, 54px);
  grid-template-columns: 1fr;
  gap: 12px;
  width: 160px;
  justify-items: center;
  align-items: start;
}
@media (max-width: 750px) {
  .grid {
    grid-template-areas:
      "box1"
      "box2"
      "menu";
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 18px;
    max-width: 99vw;
    margin: 22px 0 0 0;
  }
  .menu {
    grid-template-rows: repeat(2, 46px);
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    width: 96vw;
    margin-top: 14px;
    align-items: center;
    justify-items: center;
  }
}
.window {
  background: #e0e0e0;
  border: 2px solid #000;
  box-shadow: 4px 4px 0 #555;
  border-radius: 12px;
  padding: 20px 16px;
  box-sizing: border-box;
  width: 100%;
  max-width: 490px;
  margin: 0;
  display: flex;
  flex-direction: column;
}
.box1 { grid-area: box1; min-height: 340px; }
.box2 { grid-area: box2; max-width: 350px; min-height: 120px;}
.window-header {
  background: #c0c0c0;
  padding: 9px 17px;
  font-weight: bold;
  border-bottom: 2px solid #000;
  border-radius: 8px 8px 0 0;
  font-size: 1.09em;
}
#screen {
  padding: 17px 0px;
  font-size: 1em;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
  border-radius: 0 0 8px 8px;
  width: 100%;
}
#screen img {
  max-width: 100%;
  max-height: 260px;
  object-fit: contain;
  user-select: none;
  border-radius: 4px;
}
#text-content {
  font-size: 1.02em;
  display: flex;
  flex-direction: column-reverse;
  align-items: flex-start;
  gap: 3px;
  padding: 11px 3px 12px 3px;
  min-height: 45px;
  overflow-y: auto;
}
.iconbutton {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  background: transparent;
  border: none;
  padding: 0;
  user-select: none;
}
.iconbutton img {
  width: 38px;
  height: 38px;
  pointer-events: none;
  margin-bottom: 1px;
}
.iconbutton span {
  font-size: 0.96em;
}
@media (max-width: 430px) {
  .window {
    font-size: .96em;
    padding: 7px;
    border-radius: 8px;
  }
  .window-header {
    padding: 5px 7px;
    font-size: 1em;
  }
  .iconbutton img {
    width: 28px;
    height: 28px;
  }
}
</style>
</head>
<body>
<div class="grid">
  <nav class="menu">
    <button class="iconbutton" onclick="showNextImage('collage')"><img src="icons/pixel.png" alt=""><span>/collage</span></button>
    <button class="iconbutton" onclick="showNextImage('photography')"><img src="icons/pixel.png" alt=""><span>/photography</span></button>
    <button class="iconbutton" onclick="showNextImage('about')"><img src="icons/pixel.png" alt=""><span>/about</span></button>
    <button class="iconbutton" onclick="showNextImage('textiles')"><img src="icons/pixel.png" alt=""><span>/textiles</span></button>
    <button class="iconbutton" onclick="showNextImage('etc')"><img src="icons/pixel.png" alt=""><span>/etc</span></button>
  </nav>
  <section class="window box1">
    <div class="window-header">~/jahns/png.view</div>
    <div id="screen"></div>
  </section>
  <section class="window box2">
    <div class="window-header">~/jonas/v1.0.txt</div>
    <div id="text-content"></div>
  </section>
</div>
<script>
let galleryData = {};
const counters = {};
let textLog = [];
fetch('gallery.json')
  .then(response => response.json())
  .then(data => { galleryData = data; });

function showNextImage(folder) {
  const screen = document.getElementById('screen');
  const textContent = document.getElementById('text-content');
  if (!galleryData[folder]) return;
  if (!counters[folder]) counters[folder] = 0;
  const files = galleryData[folder];
  const idx = counters[folder] % files.length;
  const item = files[idx];

  while (screen.firstChild) screen.removeChild(screen.firstChild);
  const img = new Image();
  img.src = item.img;
  img.alt = folder + " " + (idx + 1);
  screen.appendChild(img);

  // Text-Logik: an den Anfang anhÃ¤ngen, max 5 anzeigen
  textLog.unshift(item.text);
  if (textLog.length > 5) textLog = textLog.slice(0, 5);
  textContent.innerHTML = textLog.map(t => `<div>${t}</div>`).join('');
  counters[folder]++;
}
</script>
</body>
</html>
